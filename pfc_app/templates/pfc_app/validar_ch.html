{% extends 'base.html' %}

{% block content %}
{% include 'parciais/_messages.html' %}

<div class="d-flex p-2 justify-content-center mb-5"><h1>VALIDAR CURSO EXTERNO</h1></div>
<div class="d-flex row">
    <div class="col-md-5 col-12">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="col form-floating mb-3">
                <input type="input" class="form-control" name="nome_curso" id="nome_curso_id" required>
                <label for="nome_curso_id" >Nome do Curso Para Validação</label>
            </div>
            <div class="col form-floating mb-3">
                <input type="input" class="form-control" name="ch_solicitada" id="ch_solicitada_id" required>
                <label for="ch_solicitada_id" >Carga Horária Solicitada</label>
            </div>
            <div class="col form-floating mb-3">
                <select class="form-control" name="condicao_acao" id="id_condicao_acao">
                    {% for codigo, nome in opcoes %}
                        <option value="{{ codigo }}">{{ nome }}</option>
                    {% endfor %}
                </select>
                <label for="id_condicao_acao">Selecione uma Opção</label>
            </div>
            <div class="col form-floating mb-3">
                <select class="form-control" name="carreira" id="id_carreira">
                    {% for carreira in carreiras %}
                        <option value="{{ carreira.id }}">{{ carreira.nome }} ({{ carreira.sigla }})</option>
                    {% endfor %}
                </select>
                <label for="id_carreira">Escolha a Carreira</label>
            </div>
            <div class="col form-floating mb-3">
                <input type="date" class="form-control" name="data_inicio"  id="id_data_inicio" required>
                <label for="id_data_inicio" >Data de Início do Curso</label>
            </div>
            <div class="col form-floating mb-3">
                <input type="date" class="form-control" name="data_termino"  id="id_data_termino" required>
                <label for="id_data_termino" >Data de Término do Curso</label>
            </div>
            <div class="col form-floating mb-3">
                <input type="input" class="form-control" name="instituicao_promotora" id="instituicao_promotora_id" required>
                <label for="instituicao_promotora_id" >Instituição Promotora</label>
            </div>
            <div class="col form-floating mb-3">
                <textarea class="form-control" name="ementa" id="ementa_id" rows="4"  required></textarea>
                <label for="ementa_id" >Ementa</label>
            </div>
            <div class="col  mb-3 form-check">
                <input class="form-check-input" type="checkbox" value="sim" id="agenda_pfc_id" name="agenda_pfc">
                <label class="form-check-label" for="agenda_pfc_id">
                    Ficou sabendo pela agenda PFC?
                </label>
            </div>
            <div class="input-group input-group-md mb-3 mr-3 mt-3">
                <div class="col input-group-md">
                    <input type="file" class="form-control" id="inputGroupFile02" name="arquivo_pdf" accept=".pdf" title="Escolha um Arquivo" required>
                </div>
                <button class="input-group-text btn-primary" for="inputGroupFile02" type="submit">Enviar</button>
                
            </div>
        </form>
    </div>
    <div class="col-md-7 col-12 px-3 overflow-auto border rounded" style="height: 60vh;">
        <div class="d-flex p-2 justify-content-center mb-5"><h3>Validações Enviadas</h3></div>
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Nome do curso</th>
                <th scope="col">Instituição promotora</th>
                <th scope="col">Carga horária solicitada</th>
                <th scope="col">Carga horária validada</th>
                <th scope="col">Situação</th>
              </tr>
            </thead>
            <tbody>
            {% for validacao in validacoes %}
              <tr>
                <th scope="row">{{ validacao.nome_curso }}</th>
                <td>{{ validacao.instituicao_promotora }}</td>
                <td>{{ validacao.ch_solicitada }}</td>

                <td>{{ validacao.ch_confirmada|default:0 }}</td>
                <td>{{ validacao.status }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
    </div>
</div>
{% endblock %}